{
  "name": "mysql-source-logging",
  "config": {
    "connector.class": "io.debezium.connector.mysql.MySqlConnector",
    "database.hostname": "${file:/config.properties:db.hostname}",
    "database.port": "3306",
    "database.user": "${file:/config.properties:db.username}",
    "database.password": "${file:/config.properties:db.password}",
    "database.jdbc.driver": "com.mysql.jdbc.Driver",
    "database.server.name": "${file:/config.properties:db.server-name}",
    "database.ssl.mode": "${file:/config.properties:db.ssl-mode}",
    "tasks.max": "1",
    "database.include.list": "logging",
    "table.include.list": "logging.audit",
    "database.history.store.only.monitored.tables.ddl": "true",
    "database.history.kafka.bootstrap.servers": "${file:/config.properties:kafka.bootstrap-servers}",
    "database.history.kafka.topic": "schema-changes.logging",
    "include.schema.changes": "false",
    "connect.timeout.ms": "45000",
    "key.converter": "io.confluent.connect.avro.AvroConverter",
    "key.converter.schema.registry.url": "${file:/config.properties:schema-registry}",
    "value.converter": "io.confluent.connect.avro.AvroConverter",
    "value.converter.schema.registry.url": "${file:/config.properties:schema-registry}",
    "topic.creation.default.replication.factor": "${file:/config.properties:kafka.topic-repl-factor}",
    "topic.creation.default.partitions": "${file:/config.properties:kafka.topic-partitions}",
    "errors.retry.timeout": 600000,
    "errors.retry.delay.max.ms": 30000,

    "transforms": "unwrap,dropTopicPrefix,Cast,InsertField",
    "transforms.unwrap.drop.tombstones": true,
    "transforms.unwrap.delete.handling.mode": "rewrite",
    "transforms.unwrap.add.fields": "op,table",
    "transforms.unwrap.type": "io.debezium.transforms.ExtractNewRecordState",
    "transforms.dropTopicPrefix.type": "org.apache.kafka.connect.transforms.RegexRouter",
    "transforms.dropTopicPrefix.regex": "${file:/config.properties:db.server-name}.(.*)",
    "transforms.dropTopicPrefix.replacement": "$1",
    "transforms.Cast.type": "org.apache.kafka.connect.transforms.Cast$Value",
    "transforms.Cast.spec": "__deleted:boolean",
    "transforms.InsertField.type": "org.apache.kafka.connect.transforms.InsertField$Value",
    "transforms.InsertField.static.field": "__env",
    "transforms.InsertField.static.value": "dev"
  }
}
